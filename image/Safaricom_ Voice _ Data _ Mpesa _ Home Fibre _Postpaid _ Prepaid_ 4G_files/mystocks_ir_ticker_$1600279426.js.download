function SynergyStream(a,b,d,c,e,f){var g={errorTop:100,errorLeft:0,errorId:"ajaxErrorPane",restricted:0,loadElementID:"load",interval:3E3,pingInterval:3E4,syncData:[],urlSeparator:"-"},h=document.createElement("div");a="myStocks_"+a;e=e||{};for(i in e)g[i]=e[i];this.forceParam=this.trackOld=this.connected=this.isMaster=this.loading=this.hTimer=0;this.options=g;this.track=d;this.stamp=c;this.seconds15=15E3;this.minutes50=3E6;this.name=a;this.corsSupport="undefined"==typeof f?!1:Boolean(f);this.errorElement=h;this.interval=(this.closed=b)?this.minutes50:g.interval;this.isLive=document.location.hostname.match(/(mystocks\.co\.ke)$/i);this.showLoading(0);h.id=g.errorId;h.onclick=function(){this.style.display="none"};h.style.display="none";document.body.appendChild(h);try{localStorage.setItem(a,a),this.useStorage=+(localStorage.getItem(a)==a),localStorage.removeItem(a),addEventHandler(window,"storage",this,!1),addEventHandler(window,"unload",this,!1),this.masterize()}catch(k){this.useStorage=0,this.connect(1)}}SynergyStream.prototype.connect=function(a){a&&!this.connected&&this.interval?(this.hTimer=setInterval(function(){this.process()}.bind(this),this.interval),this.connected=1):!a&&this.connected&&(clearInterval(this.hTimer),this.connected=0)};SynergyStream.prototype.error=function(a){var b=this.errorElement,d=b.style,c=this.seconds15;d.left=this.options.errorLeft+"px";d.top=this.options.errorTop+"px";(d.display=a?"":"none")||(this.interval<=c&&(this.interval=c),b.innerHTML=a)};SynergyStream.prototype.evalJSON=function(a){var b,d=this.minutes50;if(a=trimSpaces(a))if("<reload/>"==a)this.reload();else if("<HTML><BODY><B>200 OK</B></BODY></HTML>"!=a&&(b=parseJSON(a)))if(a=(this.closed=!b.update)?d:this.options.restricted?this.options.interval:1E3*b.update,b.reload||this.interval==d&&a!=d)this.reload();else return this.interval=a,b;return!1};SynergyStream.prototype.event=function(a,b){var d=this.options;return d[a]?d[a](this,b):!1};SynergyStream.prototype.force=function(){if(this.trackOld==this.track)return this.interval<this.seconds15&&16<=this.forceParam&&(this.interval=~~(1.5*this.interval)),""+this.options.urlSeparator+this.forceParam++;this.trackOld=this.track;return""};SynergyStream.prototype.handleEvent=function(a){var b;"unload"==a.type?(addEventHandler(window,"storage",this,!1),addEventHandler(window,"unload",this,!1),this.isMaster&&this.ping(0)):a.key==this.name+"_data"&&(b=this.evalJSON(a.newValue))?this.processData(b,0):a.key==this.name+"_sync"?this.event("onSyncData",a.newValue):a.key==this.name+"_ping"&&this.isMaster&&(clearTimeout(this.hPing),this.isMaster=0,this.hPing=setTimeout(this.masterize.bind(this),this.randomize()))};SynergyStream.prototype.masterize=function(){var a=new Date,b=this.options,d=this.isMaster;clearTimeout(this.hPing);!this.isMaster&&a.getTime()-this.pingValue()>b.pingInterval+5E3&&(this.isMaster=this.useStorage);this.isMaster?(this.ping(a.getTime()),d||this.connect(1)):d&&this.connect(0);this.hPing=setTimeout(this.masterize.bind(this),b.pingInterval+this.randomize())};SynergyStream.prototype.ping=function(a){localStorage.setItem(this.name+"_ping",a)};SynergyStream.prototype.pingValue=function(){return+localStorage.getItem(this.name+"_ping")||0};SynergyStream.prototype.process=function(){var a,b,d=!1,c=new XMLHttpRequest;c&&"withCredentials"in c||(!this.corsSupport||"undefined"==typeof XDomainRequest)||(c=new XDomainRequest,d=!0);c&&(!this.loading&&(this.url=a=this.event("onGetUrl",null)))&&(this.connect(0),this.showLoading(1),b=function(a){a&&(this.processData(a,1),this.useStorage&&this.isMaster&&localStorage.setItem(this.name+"_data",c.responseText));this.error("");c.onloadend()}.bind(this),d?c.onload=function(){b(this.evalJSON(c.responseText))}.bind(this):c.onreadystatechange=function(){if(4==c.readyState&&c.status)switch(c.status){case 200:b(this.evalJSON(c.responseText));break;case 302:case 304:this.error("");c.onloadend();break;default:this.error(c.status+": "+c.statusText)}}.bind(this),c.onerror=function(){this.error("Network error, myStocks servers unreachable.")}.bind(this),c.onloadend=function(){this.showLoading(0);(this.useStorage&&this.isMaster||!this.useStorage)&&this.connect(1)}.bind(this),d?c.open("GET",a,!0):c.open("GET",a),c.setRequestHeader("Accept","application/json"),c.send(""))};SynergyStream.prototype.processData=function(a,b){this.event("onUpdate",a);this.stamp=a.stamp;this.track=a.track;this.forceParam=0};SynergyStream.prototype.randomize=function(){return~~(1E3*Math.random())};SynergyStream.prototype.reload=function(){return reloadPage()};SynergyStream.prototype.showLoading=function(a){styl(this.options.loadElementID).display=(this.loading=a)?"":"none"};SynergyStream.prototype.syncData=function(a){var b=this.options.syncData;this.event("onSyncData",a);this.options.syncData!=b&&localStorage.setItem(this.name+"_sync",this.options.syncData)};function toggleTick(a){"undefined"==typeof a.cn&&(a.cn=a.className);if(-1==a.className.indexOf(" tick"))return a.className+=" tick",1;a.className=a.cn;return 0}function xT(a,b){var d=a+"_",c=a+"b_",e,f,g;for(f=1;4>f&&null!=(e=obj(d+f));f++)styl(c+f).display=(g=b==f)?"":"none",e.className="tct"+(g?" tctsel":"")}function updateRows(a){var b=a.r.length,d,c,e,f,g,h;for(d=0;d<b;d++)if(c=a.r[d],e=obj(f=c[0]),g=c.length,h=e.cells,c[1]){e.style.backgroundColor=rtBGColor;if(17==g&&(g--,e=e.attributes.getNamedItem("srt")))try{e.value=e.value.split(":")[0]+c[g]}catch(k){e.nodeValue=e.nodeValue.split(":")[0]+c[g]}for(e=2;e<g;e++)null!=c[e]&&(h[e-2].innerHTML=c[e]);setTimeout("endFlash('"+f+"')",flashDuration)}else for(e=2;e<g;e++)null!=c[e]&&(h[e-2].innerHTML=c[e])};function getCorsObject(a){var b=new XMLHttpRequest;a=dataDomain+a;if("withCredentials"in b)b.open("GET",a,!0);else if("undefined"!=typeof XDomainRequest)b=new XDomainRequest,b.open("GET",a);else return!1;return b}var __mslerrs=0,__msljs=[];window.onerror=function(a,b,d,c,e){if(b.match(/\/mystocks_ir(_ticker)?(_\$\d+)?\.js$/i)&&8>__mslerrs++){var f=window.encodeURIComponent,g=getCorsObject("/ajax/ir/errors/"+encodeTicker(NSE_CODE)+"?m="+f(a)+";s="+f(b)+";l="+parseInt(d)+("undefined"==typeof c?"":";c="+parseInt(c))+("undefined"==typeof e||"undefined"==typeof e.stack?"":";o="+f(e.stack))+";u="+f(window.location.href)+";r="+f(document.referrer)+";a="+f(navigator.userAgent)+";p="+f(navigator.platform));g&&setTimeout(function(){g.send()},0)}};Function.prototype.bind||(Function.prototype.bind=function(a){if("function"!==typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var b=Array.prototype.slice.call(arguments,1),d=this,c=function(){},e=function(){return d.apply(this instanceof c&&a?this:a,b.concat(Array.prototype.slice.call(arguments)))};c.prototype=this.prototype;e.prototype=new c;return e});function styl(a){return obj(a).style}function encodeTicker(a){return a.replace("&","%2526").replace(";","%253B").replace("^","%255E")}function getObjMethodClosure(a,b){return function(d){return a[b](d)}}function addEventHandler(a,b,d){a.addEventListener?a.addEventListener(b,d,!1):a.attachEvent&&("object"==typeof d&&d.handleEvent?(a.mystocksFunc=function(){this.handleEvent(event)}.bind(d),a.attachEvent("on"+b,a.mystocksFunc)):a.attachEvent("on"+b,d))}function consoleLog(a){"function"==typeof console.log&&console.log(a)}function trimSpaces(a){a=a.replace(/\s+$/,"");return a.replace(/^\s+/,"")}function parseJSON(a){if("string"!==typeof a||!a)return null;if(JSON&&JSON.parse)return JSON.parse(a);if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return(new Function("return "+a))();throw"Invalid JSON";}function reloadPage(){if("undefined"!=typeof debug&&debug)debugger;setTimeout(function(){var a=window;try{"function"==typeof top.window.location.reload&&(a=top.window)}catch(b){}a.location.reload()},100);return!1}function getAbsPos(a){var b=0,d=0;if(a.offsetParent){do s=window.getComputedStyle(a,null),"relative"!=s.position&&(b+=a.offsetLeft,d+=a.offsetTop);while(a=a.offsetParent)}return{left:b,top:d}}function __msljsld(){}function createStreamer(){if(!streamerCreated){var a=parseInt(trimSpaces((obj("msl-ir-ticker-update")||obj("rt-update")).innerHTML)),b=new SynergyStream("msl-ir-"+NSE_CODE,!a,parseInt(trimSpaces((obj("msl-ir-ticker-track")||obj("rt-track")).innerHTML)),parseInt(trimSpaces((obj("msl-ir-ticker-stamp")||obj("rt-stamp")).innerHTML)),{interval:1E3*a,urlSeparator:"&",errorId:"msl-ir-error",loadElementID:"msl-ir-load",onUpdate:function(a,c){if(obj("myStocks-ir-container")){var b=function(a,b){obj(a).innerHTML=b},f=obj("tabOrders");obj("rtChange").className=c.klass;b("rtTime",c.time+" &#8212; Market "+c.market);b("rtPrice",c.price);b("rtChange",c.change);b("rtPrev",c.previous);b("rtAvg",c.average);b("rtOpen",c.open);b("rtHi",c.high);b("rtLo",c.low);b("rtVol",c.volume);b("rtTurnover",c.turnover);b("rtDeals",c.deals);f&&(f.innerHTML=c.depth)}obj("myStocks-ir-ticker")&&(b=function(a,b,c){switch(c){case "c0":b="&#x25b2; "+b;break;case "c1":b="&#x25bc; "+b;break;default:c=""}(a=obj("msl-ir-ticker-"+a)).innerHTML=b;c&&(a.className=c)},b("time",c.time+" &#8212; "+c.market),b("previous",c.previous),b("price",c.price),b("change",c.change,c.klass),b("high",c.high),b("low",c.low),b("average",c.average),b("volume",c.volume),mapMslToCsp())},onGetUrl:function(a,b){return dataDomain+"/ajax/ir/rtdata/"+encodeTicker(NSE_CODE)+"?t="+a.track+"&s="+a.stamp+(obj("tabOrders")?"&b="+(a.track+a.stamp):"")}},!0);setTimeout(function(){var a=obj("myStocks-ir-container")||obj("myStocks-ir-ticker"),c=getAbsPos(a),e=b.options;e.errorTop=c.top+a.clientHeight;e.errorLeft=c.left;if(a=obj("rt-meta"))a.innerHTML="";if(a=obj("msl-ir-ticker-meta"))a.innerHTML=""},1E3);streamerCreated++}}window.getComputedStyle||(window.getComputedStyle=function(a,b){this.el=a;this.getPropertyValue=function(b){var c=/(\-([a-z]){1})/g;"float"==b&&(b="styleFloat");c.test(b)&&(b=b.replace(c,function(a,b,c){return c.toUpperCase()}));return a.currentStyle[b]?a.currentStyle[b]:null};return this});var obj=getObjMethodClosure(document,"getElementById"),streamerCreated=0;function mapMslToCsp(){var a=function(a,d,c){(a=obj("msl-ir-ticker-"+a))&&(d=obj(d))&&(d.innerHTML=a.innerHTML,c&&(d.className=a.className))};a("time","csp_market_time");a("previous","csp_previous_close");a("price","csp_current_price");a("change","csp_change",!0);a("volume","csp_volume")}(function(){var a=getCorsObject("/ajax/ir/ticker/"+encodeTicker(NSE_CODE)),b=function(){var b=obj("myStocks-ir-ticker");if(a.html&&b)return a.timer&&clearInterval(a.timer),b.innerHTML=a.html,mapMslToCsp(),a.html=null,createStreamer(),!0};a&&(a.html=a.timer=null,a.onerror=function(){},a.onload=function(){a.html=a.responseText;b()||(a.timer=setInterval(function(){b()},1E3))},setTimeout(function(){a.send()},0))})();__msljsld('mystocks_ir_ticker',1);